# REST Client Test File for Travel Assistant API
# Use with VS Code REST Client extension or similar tools

### Variables
@baseUrl = http://localhost:8000
@contentType = application/json

###############################################
# 1. Health Check - Root Endpoint
###############################################

GET {{baseUrl}}/
Accept: application/json

###############################################
# 2. Detailed Health Check
###############################################

GET {{baseUrl}}/health
Accept: application/json

###############################################
# 3. API Documentation Info
###############################################

GET {{baseUrl}}/docs-info
Accept: application/json

###############################################
# 4. Non-Streaming Request - Simple Query
###############################################

POST {{baseUrl}}/travel-assistant
Content-Type: {{contentType}}

{
  "query": "Tell me about Tokyo",
  "stream": false
}

###############################################
# 5. Non-Streaming Request - Full Trip Planning
###############################################

POST {{baseUrl}}/travel-assistant
Content-Type: {{contentType}}

{
  "query": "Plan a 3-day trip to Tokyo from Singapore. Search flights, check weather, and find attractions.",
  "stream": false
}

###############################################
# 6. Streaming Request - Simple Query
###############################################

POST {{baseUrl}}/travel-assistant
Content-Type: {{contentType}}

{
  "query": "Tell me about Paris",
  "stream": true
}

###############################################
# 7. Streaming Request - Full Trip Planning
###############################################

POST {{baseUrl}}/travel-assistant
Content-Type: {{contentType}}

{
  "query": "Plan a 3-day trip to Tokyo from Singapore. Search flights, get weather forecast, and find top attractions. Use all available tools.",
  "stream": true
}

###############################################
# 8. Streaming Request - Paris Trip
###############################################

POST {{baseUrl}}/travel-assistant
Content-Type: {{contentType}}

{
  "query": "I want to visit Paris next month. Can you search for flights from New York, tell me about the weather, and suggest top attractions?",
  "stream": true
}

###############################################
# 9. Streaming Request - London Trip
###############################################

POST {{baseUrl}}/travel-assistant
Content-Type: {{contentType}}

{
  "query": "Find me flights to London from Los Angeles, check the weather forecast, and suggest top tourist attractions.",
  "stream": true
}

###############################################
# 10. Non-Streaming - Multi-City Trip
###############################################

POST {{baseUrl}}/travel-assistant
Content-Type: {{contentType}}

{
  "query": "I want to visit Tokyo, Kyoto, and Osaka in Japan. Search flights from Singapore to Tokyo, check weather for all three cities, and find attractions in each city.",
  "stream": false
}

###############################################
# CURL COMMANDS FOR TESTING
###############################################

# Health Check
# curl http://localhost:8000/health

# Non-Streaming Request
# curl -X POST http://localhost:8000/travel-assistant \
#   -H "Content-Type: application/json" \
#   -d '{
#     "query": "Plan a trip to Tokyo",
#     "stream": false
#   }'

# Streaming Request (use -N to disable buffering)
# curl -N -X POST http://localhost:8000/travel-assistant \
#   -H "Content-Type: application/json" \
#   -d '{
#     "query": "Plan a 3-day trip to Tokyo from Singapore. Search flights, check weather, and find attractions.",
#     "stream": true
#   }'

###############################################
# HTTPIE COMMANDS (Alternative to curl)
###############################################

# Health Check
# http GET http://localhost:8000/health

# Non-Streaming Request
# http POST http://localhost:8000/travel-assistant \
#   query="Plan a trip to Tokyo" \
#   stream:=false

# Streaming Request
# http --stream POST http://localhost:8000/travel-assistant \
#   query="Plan a trip to Tokyo" \
#   stream:=true

###############################################
# POSTMAN/INSOMNIA SETUP
###############################################

# Method: POST
# URL: http://localhost:8000/travel-assistant
# Headers:
#   Content-Type: application/json
# Body (raw JSON):
# {
#   "query": "Plan a 3-day trip to Tokyo from Singapore. Search flights, check weather, and find attractions.",
#   "stream": true
# }

###############################################
# EXPECTED SSE STREAMING FORMAT
###############################################

# Streaming responses use Server-Sent Events (SSE) format:
# 
# data: {"content": "I can help you plan"}
# 
# data: {"content": " your trip to Tokyo"}
# 
# data: {"content": "!"}
# 
# data: [DONE]
#
# Each line starts with "data: " followed by JSON
# The stream ends with "data: [DONE]"

###############################################
# TESTING NOTES
###############################################

# 1. Server must be running: python3 server.py
# 2. For streaming, use tools that don't buffer (curl -N, http --stream)
# 3. Streaming shows incremental progress (better UX)
# 4. Non-streaming waits for complete response
# 5. Both modes produce equivalent final output
# 6. State is NOT persisted between requests
# 7. Each request is independent and stateless
